# 架构决策记录 (Architecture Decision Records - ADR)

## 📋 概述

架构决策记录(ADR)是记录项目中重要架构决策的文档集合。每个ADR记录了一个具体的架构决策，包括决策背景、考虑的选项、最终决策和后果。

## 🎯 ADR的价值

### 对开发团队
- **决策透明化**: 让团队成员了解为什么做出某个技术选择
- **知识传承**: 新成员可以快速了解项目的技术演进历程
- **避免重复讨论**: 已记录的决策避免反复争论相同问题

### 对AI编程助手
- **上下文理解**: AI可以理解项目的技术选型背景和约束
- **决策一致性**: 确保AI生成的代码符合项目的架构原则
- **最佳实践应用**: AI可以应用项目中已验证的设计模式和优化策略

## 📁 ADR目录结构

```
doc/architecture/adr/
├── README.md                           # 本文档
├── template.md                         # ADR模板
├── 0001-technology-stack-selection.md  # 技术栈选择
├── 0002-frontend-architecture.md       # 前端架构设计
├── 0003-backend-architecture.md        # 后端架构设计
├── 0004-database-design.md             # 数据库设计
├── 0005-authentication-strategy.md     # 认证策略
├── 0006-caching-strategy.md            # 缓存策略
├── 0007-logging-strategy.md            # 日志策略
├── 0008-error-handling.md              # 错误处理
├── 0009-performance-optimization.md    # 性能优化
├── 0010-design-patterns.md             # 设计模式应用
├── 0011-lowcode-engine-architecture.md # 低代码引擎架构
└── index.json                          # ADR索引文件
```

## 📝 ADR编写规范

### 1. 命名规范
- 格式: `NNNN-title-with-dashes.md`
- 编号: 4位数字，从0001开始
- 标题: 使用短横线分隔的小写英文

### 2. 内容结构
每个ADR必须包含以下部分：
- **状态**: 提议/已接受/已弃用/已替代
- **背景**: 决策的背景和动机
- **决策**: 具体的决策内容
- **后果**: 决策带来的正面和负面影响
- **替代方案**: 考虑过但未采用的其他选项

### 3. 状态管理
- **提议(Proposed)**: 正在讨论中的决策
- **已接受(Accepted)**: 已经采用的决策
- **已弃用(Deprecated)**: 不再推荐使用
- **已替代(Superseded)**: 被新的ADR替代

## 🔍 AI使用指南

### AI如何使用ADR
1. **技术选型参考**: 在选择技术方案时参考相关ADR
2. **架构约束遵循**: 确保生成的代码符合架构决策
3. **设计模式应用**: 使用项目中已验证的设计模式
4. **性能优化**: 应用已记录的性能优化策略

### AI触发关键词
当用户提到以下内容时，AI应该参考相关ADR：
- "技术选型"、"框架选择" → 参考技术栈ADR
- "架构设计"、"系统设计" → 参考架构ADR
- "性能优化"、"性能问题" → 参考性能优化ADR
- "设计模式"、"代码结构" → 参考设计模式ADR
- "缓存"、"数据库"、"认证" → 参考相应的专项ADR

## 📊 当前ADR状态

| 编号 | 标题 | 状态 | 最后更新 |
|------|------|------|----------|
| 0001 | 技术栈选择 | 已接受 | 2025-09-11 |
| 0002 | 前端架构设计 | 已接受 | 2025-09-11 |
| 0003 | 后端架构设计 | 已接受 | 2025-09-11 |
| 0004 | 数据库设计 | 已接受 | 2025-09-11 |
| 0005 | 认证策略 | 已接受 | 2025-09-11 |
| 0006 | 缓存策略 | 已接受 | 2025-09-11 |
| 0007 | 日志策略 | 已接受 | 2025-09-11 |
| 0008 | 错误处理 | 已接受 | 2025-09-11 |
| 0009 | 性能优化 | 已接受 | 2025-09-11 |
| 0010 | 设计模式应用 | 已接受 | 2025-09-11 |
| 0011 | 低代码引擎架构 | 已接受 | 2025-09-11 |

## 🔗 相关资源

- [ADR模板](./template.md)
- [技术栈选择ADR](./0001-technology-stack-selection.md)
- [性能优化策略ADR](./0009-performance-optimization.md)
- [设计模式应用ADR](./0010-design-patterns.md)
- [SmartAbp项目架构文档](../README.md)

## 📋 维护指南

### 创建新ADR
1. 使用下一个可用编号
2. 复制ADR模板
3. 填写所有必需部分
4. 更新本README的索引表
5. 更新index.json文件

### 更新现有ADR
1. 如果决策发生重大变化，创建新ADR并标记旧ADR为"已替代"
2. 小的修正可以直接更新现有ADR
3. 记录更新日期和原因

### 弃用ADR
1. 将状态改为"已弃用"
2. 在文档中说明弃用原因
3. 如果有替代方案，提供链接