# ç³»ç»Ÿæ¶æ„è¯´æ˜ä¹¦ï¼ˆSmartAbpï¼‰

ç‰ˆæœ¬ï¼šv4.0  ï½œ çŠ¶æ€ï¼šæ­£å¼ç‰ˆ  ï½œ é€‚ç”¨èŒƒå›´ï¼š`SmartAbp` ä¼ä¸šçº§å…¨æ ˆä½ä»£ç å¹³å°ï¼ˆ.NET 9 + ABP v9.1.1 + Vue 3 + TypeScript + ä½ä»£ç å¼•æ“ï¼‰
æœ€åæ›´æ–°ï¼š2025-09-19  ï½œ åŸºäºä½ä»£ç å¼•æ“é‡æ„å®ŒæˆæŠ¥å‘Šæ›´æ–°

## 1. æ¶æ„æ¦‚è§ˆ

SmartAbpæ˜¯ä¸€ä¸ªä¼ä¸šçº§å…¨æ ˆä½ä»£ç å¼€å‘å¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»ã€å¾®å†…æ ¸+æ’ä»¶ã€æ¨¡å—åŒ–çš„åˆ†å±‚æ¶æ„ã€‚ç»è¿‡2025å¹´9æœˆçš„å…¨é¢é‡æ„ï¼Œç³»ç»Ÿå·²è¾¾åˆ°ä¼ä¸šçº§ç”Ÿäº§æ ‡å‡†ï¼Œæ‰€æœ‰P0çº§åˆ«è‡´å‘½ç¼ºé™·å·²ä¿®å¤ï¼š

- **åç«¯**ï¼šåŸºäºABP v9.1.1 + .NET 9æ„å»ºï¼Œé›†æˆä¼ä¸šçº§åç«¯ä½ä»£ç å¼•æ“ï¼ˆSmartAbp.CodeGeneratorï¼‰ï¼Œæ”¯æŒDDDã€CQRSã€å¾®æœåŠ¡ç­‰ä¼ä¸šæ¶æ„æ¨¡å¼
- **å‰ç«¯**ï¼šVue 3 + TypeScript + Vite SPAï¼Œå†…ç½®å…¨æ ˆä½ä»£ç å¼•æ“ï¼ˆMonorepoæ¶æ„ï¼Œ6ä¸ªç‹¬ç«‹åŒ…ï¼‰ï¼Œæ”¯æŒå¯è§†åŒ–è®¾è®¡å™¨å’Œä»£ç è‡ªåŠ¨ç”Ÿæˆ
- **ä½ä»£ç å¼•æ“**ï¼šå¾®å†…æ ¸+æ’ä»¶æ¶æ„ï¼Œæ”¯æŒå‰åç«¯ä»£ç ç”Ÿæˆã€å¯è§†åŒ–è®¾è®¡ã€æ¨¡æ¿é©±åŠ¨å¼€å‘ï¼Œå·²é‡æ„ä¸ºä¼ä¸šçº§æ ‡å‡†

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§ï¼ˆåŸºäºé‡æ„å®ŒæˆæŠ¥å‘Šï¼‰
- ğŸ”§ **ä¼ä¸šçº§å¾®å†…æ ¸æ¶æ„**: è½»é‡çº§å†…æ ¸ + 60+ä¸ªæ–‡ä»¶çš„å¯æ’æ‹”æ’ä»¶ç³»ç»Ÿï¼Œæ‰€æœ‰P0ç¼ºé™·å·²ä¿®å¤
- ğŸ¨ **P2çº§å¯è§†åŒ–è®¾è®¡å™¨**: ä¼ä¸šçº§æ‹–æ‹½å¼ç•Œé¢è®¾è®¡å™¨ï¼Œæ”¯æŒCanvasã€Paletteã€Inspectorï¼Œä¸¥æ ¼ç±»å‹å®‰å…¨
- ğŸ—ï¸ **å…¨æ ˆä»£ç ç”Ÿæˆ**: æ”¯æŒVue3ã€ABPã€å®ä½“ã€CRUDç­‰å¤šå±‚ä»£ç ç”Ÿæˆï¼Œè´¨é‡è¾¾åˆ°äººå·¥ç¼–å†™æ ‡å‡†
- ğŸ“¦ **Monorepoæ¶æ„**: 6ä¸ªç‹¬ç«‹åŒ…ï¼ˆ@smartabp/lowcode-*ï¼‰ï¼Œç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œçº¦11,000è¡Œä»£ç ï¼Œæ”¯æŒTree-shaking
- ğŸš€ **ä¼ä¸šçº§ç‰¹æ€§**: æ€§èƒ½ç›‘æ§ã€ç¼“å­˜ç®¡ç†ã€Workeræ± ã€è”é‚¦åŒ–ç³»ç»Ÿã€é˜²å›å½’è´¨é‡é—¨
- ğŸ”Œ **ä¸°å¯Œæ’ä»¶ç”Ÿæ€**: SFCç¼–è¯‘å™¨ã€è·¯ç”±ç”Ÿæˆå™¨ã€çŠ¶æ€ç®¡ç†ç”Ÿæˆå™¨ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹æ‰©å±•
- âœ… **ç”Ÿäº§å°±ç»ª**: é€šè¿‡ä¼ä¸šçº§ä»£ç è´¨é‡æ ‡å‡†ï¼Œæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒ

## 2. åç«¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆå‡çº§ï¼ˆåŸºäºé‡æ„è®¡åˆ’ï¼‰
- **.NETç‰ˆæœ¬**: .NET 9ï¼ˆæœ€æ–°LTSç‰ˆæœ¬ï¼‰
- **ABP Framework**: v9.1.1ï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
- **æ•°æ®åº“**: SQL Server / PostgreSQL / MySQL
- **ORM**: Entity Framework Core 9.x
- **è®¤è¯**: OpenIddict 5.x + JWT
- **API**: RESTful API + GraphQL
- **ç¼“å­˜**: Redis 7.x
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ
- **ä»£ç ç”Ÿæˆ**: Roslyn + T4æ¨¡æ¿å¼•æ“

### 2.2 æ ¸å¿ƒæ¶æ„æ¨¡å¼
- **é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰**: èšåˆæ ¹ã€é¢†åŸŸæœåŠ¡ã€è§„çº¦æ¨¡å¼
- **CQRSæ¨¡å¼**: å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»
- **å¾®æœåŠ¡æ¶æ„**: æœåŠ¡æ‹†åˆ†ã€APIç½‘å…³ã€æœåŠ¡å‘ç°
- **æ•´æ´æ¶æ„**: ä¾èµ–å€’ç½®ã€å…³æ³¨ç‚¹åˆ†ç¦»
- **å¢é‡ä»£ç ç”Ÿæˆ**: åŸºäºRoslyn ASTçš„ä¼ä¸šçº§ä»£ç ç”Ÿæˆ

### 2.3 åç«¯ä½ä»£ç å¼•æ“ï¼ˆSmartAbp.CodeGeneratorï¼‰
åŸºäº.NET 9 + Roslyné‡æ„çš„ä¼ä¸šçº§ä»£ç ç”Ÿæˆå¼•æ“ï¼š

```csharp
// æ ¸å¿ƒä»£ç ç”Ÿæˆå™¨æ¥å£
public interface ICodeGenerationEngine
{
    Task<CodeGenerationResult> GenerateAsync(
        CodeGenerationRequest request,
        CancellationToken cancellationToken = default);
    
    Task<ValidationResult> ValidateAsync(
        CodeGenerationRequest request,
        CancellationToken cancellationToken = default);
}

// ä¼ä¸šçº§ä»£ç ç”Ÿæˆç»“æœ
public class CodeGenerationResult
{
    public string GeneratedCode { get; set; }
    public List<GeneratedFile> Files { get; set; }
    public CodeMetrics Metrics { get; set; }
    public List<string> Warnings { get; set; }
    public List<string> Errors { get; set; }
}
```

### 2.4 ç»Ÿä¸€å…ƒæ•°æ®æ¨¡å‹ï¼ˆæ‰©å±•ç‰ˆï¼‰
æ”¯æŒV9+ç‰ˆæœ¬çš„å¢å¼ºå…ƒæ•°æ®æ¨¡å‹ï¼š

```json
{
  "version": "2.0",
  "moduleName": "ConstructionManagement",
  "entities": [
    {
      "name": "Project",
      "properties": [
        {
          "name": "Name",
          "type": "string",
          "required": true,
          "maxLength": 128,
          "validation": {
            "pattern": "^[a-zA-Z0-9_\\-\\s]+$"
          }
        }
      ],
      "permissions": {
        "create": "ConstructionManagement.Project.Create",
        "condition": "resource.CreatedBy === user.Id",
        "dataPermissionScope": "CurrentOrganization"
      }
    }
  ],
  "ui": {
    "layout": "master-detail-tabs",
    "theme": "element-plus",
    "responsive": true
  }
}
```

## 3. å‰ç«¯æ¶æ„

### 3.1 æŠ€æœ¯æ ˆå‡çº§ï¼ˆåŸºäºé‡æ„è®¡åˆ’ï¼‰
- **Vue.js**: 3.5.xï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
- **TypeScript**: 5.6.xï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
- **Vite**: 5.xï¼ˆæ„å»ºå·¥å…·ï¼‰
- **Pinia**: 2.xï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- **Vue Router**: 4.xï¼ˆè·¯ç”±ç®¡ç†ï¼‰
- **Element Plus**: 2.xï¼ˆUIç»„ä»¶åº“ï¼‰
- **Monorepo**: pnpm workspace + turbo

### 3.2 Monorepoæ¶æ„ï¼ˆ6ä¸ªç‹¬ç«‹åŒ…ï¼‰

åŸºäºADR-0016å†³ç­–ï¼Œé‡æ„ä¸ºç‹¬ç«‹å‘åŒ…çš„Monorepoæ¶æ„ï¼š

```
src/SmartAbp.Vue/packages/
â”œâ”€â”€ @smartabp/lowcode-core          # ğŸ”§ å¼•æ“å†…æ ¸åŒ…ï¼ˆå¾®å†…æ ¸+æ’ä»¶ç³»ç»Ÿï¼‰
â”œâ”€â”€ @smartabp/lowcode-designer      # ğŸ¨ å¯è§†åŒ–è®¾è®¡å™¨åŒ…ï¼ˆP2çº§æ‹–æ‹½è®¾è®¡ï¼‰
â”œâ”€â”€ @smartabp/lowcode-codegen       # ğŸ—ï¸ ä»£ç ç”Ÿæˆå¼•æ“åŒ…ï¼ˆå‰åç«¯ä»£ç ç”Ÿæˆï¼‰
â”œâ”€â”€ @smartabp/lowcode-ui-vue        # ğŸ­ Vue UIç»„ä»¶åŒ…ï¼ˆä¼ä¸šçº§ç»„ä»¶åº“ï¼‰
â”œâ”€â”€ @smartabp/lowcode-tools         # ğŸ› ï¸ å¼€å‘å·¥å…·åŒ…ï¼ˆCLIå·¥å…·ã€è°ƒè¯•å™¨ï¼‰
â””â”€â”€ @smartabp/lowcode-api           # ğŸŒ APIå®¢æˆ·ç«¯åŒ…ï¼ˆç»Ÿä¸€APIæŠ½è±¡ï¼‰
```

### 3.3 ä½ä»£ç å¼•æ“å†…æ ¸ï¼ˆ@smartabp/lowcode-coreï¼‰
é‡æ„åçš„ä¼ä¸šçº§å¾®å†…æ ¸ç³»ç»Ÿï¼š

```typescript
// ä¸¥æ ¼ç±»å‹å®‰å…¨çš„ä¼ä¸šçº§å†…æ ¸æ¥å£
export interface LowCodeKernel {
  readonly version: string;
  readonly plugins: PluginManager;
  readonly events: EventBus;
  readonly cache: CacheManager;
  readonly performance: PerformanceMonitor;
  
  start(): Promise<void>;
  stop(): Promise<void>;
  generate<T>(schema: Schema, options?: GenerateOptions): Promise<GeneratedCode<T>>;
}

// æ’ä»¶ç³»ç»Ÿï¼ˆæ”¯æŒçƒ­æ’æ‹”ï¼‰
export interface Plugin<T = any> {
  readonly name: string;
  readonly version: string;
  readonly dependencies?: string[];
  activate(context: PluginContext): Promise<void>;
  deactivate(): Promise<void>;
}
```

### 3.4 å¯è§†åŒ–è®¾è®¡å™¨ï¼ˆ@smartabp/lowcode-designerï¼‰
P2çº§ä¼ä¸šçº§å¯è§†åŒ–è®¾è®¡å™¨ï¼š

```typescript
// ä¸‰æ å¼UIå®šåˆ¶å™¨ï¼ˆä¸¥æ ¼ç±»å‹ï¼‰
export interface VisualDesigner {
  readonly canvas: DesignCanvas;
  readonly palette: ComponentPalette;
  readonly inspector: PropertyInspector;
  readonly toolbar: DesignerToolbar;
  
  // ä¼ä¸šçº§åŠŸèƒ½
  undo(): Promise<void>;
  redo(): Promise<void>;
  validate(): ValidationResult;
  export(): DesignSchema;
  import(schema: DesignSchema): Promise<void>;
}

// å®æ—¶é¢„è§ˆï¼ˆæ²™ç®±éš”ç¦»ï¼‰
export interface PreviewEngine {
  readonly sandbox: ISandbox;
  readonly renderer: ComponentRenderer;
  
  render(component: ComponentDefinition): Promise<RenderedComponent>;
  update(props: Record<string, any>): Promise<void>;
}
```

### 3.5 ä»£ç ç”Ÿæˆå¼•æ“ï¼ˆ@smartabp/lowcode-codegenï¼‰
æ”¯æŒå‰åç«¯å…¨æ ˆä»£ç ç”Ÿæˆçš„ä¼ä¸šçº§å¼•æ“ï¼š

```typescript
// å…¨æ ˆä»£ç ç”Ÿæˆå™¨
export interface FullStackCodeGenerator {
  generateBackend(schema: Schema, options?: BackendOptions): Promise<BackendCode>;
  generateFrontend(schema: Schema, options?: FrontendOptions): Promise<FrontendCode>;
  generateDatabase(schema: Schema, options?: DatabaseOptions): Promise<DatabaseScript>;
}

// æ¨¡æ¿ç³»ç»Ÿï¼ˆæ”¯æŒè‡ªå®šä¹‰ï¼‰
export interface TemplateEngine {
  readonly templates: Template[];
  
  registerTemplate(template: Template): Promise<void>;
  render(template: Template, data: RenderData): Promise<string>;
  validate(template: Template): ValidationResult;
}
```

## 4. å…³é”®è¿è¡Œæ—¶æµç¨‹

### 4.1 ç™»å½•è®¤è¯æµç¨‹ï¼ˆå¢å¼ºç‰ˆï¼‰
```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯
    participant A as ABPåç«¯
    participant O as OpenIddict
    
    U->>F: è¾“å…¥ç”¨æˆ·åå¯†ç 
    F->>A: POST /connect/token
    A->>O: éªŒè¯ç”¨æˆ·å‡­æ®
    O-->>A: è¿”å›access_token
    A-->>F: è¿”å›JWTä»¤ç‰Œ
    F->>F: å­˜å‚¨tokenåˆ°Pinia
    F->>A: è°ƒç”¨/api/code-generator/modules
    A->>F: è¿”å›ç”¨æˆ·å¯ç”¨çš„æ¨¡å—åˆ—è¡¨
```

### 4.2 ä½ä»£ç å¼•æ“ä»£ç ç”Ÿæˆæµç¨‹ï¼ˆé‡æ„ç‰ˆï¼‰
```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant D as å¯è§†åŒ–è®¾è®¡å™¨
    participant K as ä½ä»£ç å†…æ ¸
    participant G as ä»£ç ç”Ÿæˆå™¨
    participant A as ABPåç«¯
    
    U->>D: æ‹–æ‹½ç»„ä»¶è®¾è®¡ç•Œé¢
    D->>D: å®æ—¶é¢„è§ˆï¼ˆæ²™ç®±éš”ç¦»ï¼‰
    U->>D: ç‚¹å‡»ç”Ÿæˆä»£ç 
    D->>K: å‘é€ç”Ÿæˆè¯·æ±‚
    K->>K: éªŒè¯Schemaå®Œæ•´æ€§
    K->>G: è°ƒç”¨ä»£ç ç”Ÿæˆå™¨
    G->>G: åº”ç”¨æ¨¡æ¿å¼•æ“
    G->>A: è°ƒç”¨åç«¯API
    A->>A: Roslyn ASTæ“ä½œ
    A-->>G: è¿”å›ç”Ÿæˆçš„ä»£ç 
    G-->>K: è¿”å›ç”Ÿæˆç»“æœ
    K-->>D: æ˜¾ç¤ºç”ŸæˆæˆåŠŸ
    D->>U: ä¸‹è½½æˆ–é¢„è§ˆä»£ç 
```

### 4.3 å¯è§†åŒ–è®¾è®¡å™¨å·¥ä½œæµï¼ˆP2çº§ï¼‰
```mermaid
graph TD
    A[å¼€å§‹è®¾è®¡] --> B[é€‰æ‹©æ¨¡æ¿]
    B --> C[æ‹–æ‹½ç»„ä»¶åˆ°ç”»å¸ƒ]
    C --> D[é…ç½®ç»„ä»¶å±æ€§]
    D --> E[å®æ—¶é¢„è§ˆ]
    E --> F{æ»¡æ„?}
    F -->|å¦| C
    F -->|æ˜¯| G[éªŒè¯è®¾è®¡]
    G --> H{éªŒè¯é€šè¿‡?}
    H -->|å¦| I[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]
    I --> D
    H -->|æ˜¯| J[å¯¼å‡ºSchema]
    J --> K[ç”Ÿæˆä»£ç ]
    K --> L[å®Œæˆ]
```

## 5. é…ç½®è¦ç‚¹ä¸ç¯å¢ƒåŒºåˆ†

### 5.1 ç¯å¢ƒé…ç½®ï¼ˆåŸºäº.NET 9ï¼‰
```json
// appsettings.Production.json
{
  "ConnectionStrings": {
    "Default": "Server=prod-server;Database=SmartAbp;Trusted_Connection=true;"
  },
  "Redis": {
    "Configuration": "prod-redis:6379,password=***"
  },
  "CodeGeneration": {
    "MaxConcurrentRequests": 10,
    "TimeoutSeconds": 300,
    "EnableCaching": true,
    "CacheExpirationMinutes": 60
  }
}
```

### 5.2 å‰ç«¯ç¯å¢ƒå˜é‡ï¼ˆåŸºäºViteï¼‰
```bash
# .env.production
VITE_API_BASE_URL=https://api.smartabp.com
VITE_CDN_URL=https://cdn.smartabp.com
VITE_LOWCODE_ENGINE_VERSION=4.0.0
VITE_ENABLE_ANALYTICS=true
VITE_SENTRY_DSN=https://***@sentry.io/***
```

## 6. å®‰å…¨ä¸åˆè§„

### 6.1 ç”Ÿäº§ç¯å¢ƒå®‰å…¨ç­–ç•¥
- **JWTä»¤ç‰Œ**: æ”¯æŒåˆ·æ–°ä»¤ç‰Œï¼Œè¿‡æœŸæ—¶é—´å¯é…ç½®
- **CORS**: ä¸¥æ ¼è·¨åŸŸç­–ç•¥ï¼Œä»…å…è®¸ç™½åå•åŸŸå
- **HTTPS**: å¼ºåˆ¶HTTPSï¼ŒHSTSå¤´éƒ¨
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®AES-256åŠ å¯†å­˜å‚¨
- **å®¡è®¡æ—¥å¿—**: ç”¨æˆ·æ“ä½œå®Œæ•´å®¡è®¡é“¾

### 6.2 ä½ä»£ç å¼•æ“å®‰å…¨
- **ä»£ç æ²™ç®±**: ç”¨æˆ·ä»£ç åœ¨éš”ç¦»ç¯å¢ƒä¸­æ‰§è¡Œ
- **æƒé™æ£€æŸ¥**: ç”Ÿæˆä»£ç åŒ…å«æƒé™éªŒè¯
- **è¾“å…¥éªŒè¯**: æ‰€æœ‰ç”¨æˆ·è¾“å…¥ç»è¿‡ä¸¥æ ¼éªŒè¯
- **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- **XSSé˜²æŠ¤**: è¾“å‡ºç¼–ç ï¼ŒCSPç­–ç•¥

### 6.3 æ—¥å¿—è„±æ•
```csharp
// æ•æ„Ÿä¿¡æ¯è„±æ•
public static string MaskSensitiveData(string input)
{
    if (string.IsNullOrEmpty(input)) return input;
    
    // èº«ä»½è¯å·è„±æ•
    if (Regex.IsMatch(input, @"^\d{17}[\dXx]$"))
        return $"{input.Substring(0, 4)}****{input.Substring(14)}";
    
    // æ‰‹æœºå·è„±æ•
    if (Regex.IsMatch(input, @"^1[3-9]\d{9}$"))
        return $"{input.Substring(0, 3)}****{input.Substring(7)}";
    
    return input;
}
```

## 7. æ€§èƒ½åŸºå‡†ä¸ç›‘æ§

### 7.1 æ€§èƒ½åŸºå‡†ï¼ˆé‡æ„åï¼‰
- **ä»£ç ç”Ÿæˆå“åº”æ—¶é—´**: < 2ç§’ï¼ˆ99%è¯·æ±‚ï¼‰
- **å¯è§†åŒ–è®¾è®¡å™¨åŠ è½½**: < 1ç§’
- **å®æ—¶é¢„è§ˆæ¸²æŸ“**: < 500æ¯«ç§’
- **å†…å­˜å ç”¨**: < 512MBï¼ˆå•ä¸ªä¼šè¯ï¼‰
- **å¹¶å‘æ”¯æŒ**: 1000+ å¹¶å‘ä»£ç ç”Ÿæˆè¯·æ±‚

### 7.2 ç›‘æ§æŒ‡æ ‡
```typescript
// æ€§èƒ½ç›‘æ§æŒ‡æ ‡
interface PerformanceMetrics {
  codeGenerationTime: number;      // ä»£ç ç”Ÿæˆæ—¶é—´
  templateRenderTime: number;      // æ¨¡æ¿æ¸²æŸ“æ—¶é—´
  memoryUsage: number;             // å†…å­˜ä½¿ç”¨é‡
  cpuUsage: number;                // CPUä½¿ç”¨ç‡
  errorRate: number;               // é”™è¯¯ç‡
  userSatisfaction: number;        // ç”¨æˆ·æ»¡æ„åº¦è¯„åˆ†
}
```

### 7.3 è´¨é‡é—¨ç¦ï¼ˆåŸºäºé‡æ„è®¡åˆ’ï¼‰
- **æµ‹è¯•è¦†ç›–ç‡**: â‰¥ 85%ï¼ˆé‡æ„åæ ‡å‡†ï¼‰
- **ä»£ç è´¨é‡**: SonarQube Açº§
- **æ€§èƒ½æµ‹è¯•**: æ‰€æœ‰P1åœºæ™¯é€šè¿‡
- **å®‰å…¨æ‰«æ**: é«˜å±æ¼æ´ä¸º0
- **æ–‡æ¡£å®Œæ•´æ€§**: 100%ä»£ç æœ‰æ–‡æ¡£

## 8. æ‰©å±•ç‚¹ä¸å¼€å‘çº¦å®š

### 8.1 ä½ä»£ç å¼•æ“æ‰©å±•è§„åˆ™
```typescript
// æ’ä»¶å¼€å‘è§„èŒƒ
export interface PluginDevelopmentRules {
  // å‘½åè§„èŒƒ
  name: string;                    // å¿…é¡»ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå¯åŒ…å«è¿å­—ç¬¦
  version: string;                 // éµå¾ªSemVerè§„èŒƒ
  
  // ä»£ç è§„èŒƒ
  useStrictTypes: true;           // å¿…é¡»ä½¿ç”¨ä¸¥æ ¼ç±»å‹
  useAsyncAwait: true;            // å¼‚æ­¥æ“ä½œå¿…é¡»ä½¿ç”¨async/await
  useErrorHandling: true;         // å¿…é¡»æœ‰é”™è¯¯å¤„ç†
  
  // æµ‹è¯•è¦æ±‚
  unitTestCoverage: 90;           // å•å…ƒæµ‹è¯•è¦†ç›–ç‡â‰¥90%
  integrationTests: true;         // å¿…é¡»åŒ…å«é›†æˆæµ‹è¯•
}
```

### 8.2 æ¨¡æ¿å¼€å‘è§„èŒƒ
```typescript
// æ¨¡æ¿å¼€å‘æ ‡å‡†
export interface TemplateDevelopmentStandard {
  // æ¨¡æ¿ç»“æ„
  metadata: TemplateMetadata;     // æ¨¡æ¿å…ƒæ•°æ®
  variables: TemplateVariable[];    // æ¨¡æ¿å˜é‡å®šä¹‰
  validators: TemplateValidator[];  // æ¨¡æ¿éªŒè¯å™¨
  
  // ä»£ç è´¨é‡
  formatting: 'prettier';         // ä½¿ç”¨Prettieræ ¼å¼åŒ–
  linting: 'eslint';              // ä½¿ç”¨ESLintæ£€æŸ¥
  
  // æ–‡æ¡£è¦æ±‚
  readme: string;                 // å¿…é¡»åŒ…å«ä½¿ç”¨è¯´æ˜
  examples: CodeExample[];        // å¿…é¡»åŒ…å«ç¤ºä¾‹ä»£ç 
}
```

## 9. å…³é”®æ–‡ä»¶ç´¢å¼•

### 9.1 åç«¯æ ¸å¿ƒæ–‡ä»¶
```
src/SmartAbp.CodeGenerator/
â”œâ”€â”€ Core/                          # Roslynä»£ç ç”Ÿæˆæ ¸å¿ƒ
â”‚   â”œâ”€â”€ CodeGenerationEngine.cs    # ä¸»ä»£ç ç”Ÿæˆå¼•æ“
â”‚   â”œâ”€â”€ RoslynCodeGenerator.cs    # Roslyn ASTæ“ä½œ
â”‚   â””â”€â”€ TemplateEngine.cs         # æ¨¡æ¿å¼•æ“
â”œâ”€â”€ Services/                      # åº”ç”¨æœåŠ¡
â”‚   â”œâ”€â”€ CodeGeneratorAppService.cs # ä»£ç ç”ŸæˆAPI
â”‚   â”œâ”€â”€ ModuleAppService.cs       # æ¨¡å—ç®¡ç†
â”‚   â””â”€â”€ TemplateAppService.cs       # æ¨¡æ¿ç®¡ç†
â”œâ”€â”€ DDD/                          # DDDä»£ç ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ EntityGenerator.cs        # å®ä½“ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ AppServiceGenerator.cs    # åº”ç”¨æœåŠ¡ç”Ÿæˆå™¨
â”‚   â””â”€â”€ RepositoryGenerator.cs    # ä»“å‚¨ç”Ÿæˆå™¨
â””â”€â”€ Hubs/                         # SignalRå®æ—¶é€šä¿¡
    â””â”€â”€ CodeGenerationHub.cs      # è¿›åº¦æ¨é€ä¸­å¿ƒ
```

### 9.2 å‰ç«¯æ ¸å¿ƒæ–‡ä»¶ï¼ˆMonorepoï¼‰
```
src/SmartAbp.Vue/packages/
â”œâ”€â”€ @smartabp/lowcode-core/src/      # å¼•æ“å†…æ ¸
â”‚   â”œâ”€â”€ kernel.ts                     # å¾®å†…æ ¸ä¸»ç±»
â”‚   â”œâ”€â”€ plugin-manager.ts             # æ’ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ event-bus.ts                  # äº‹ä»¶æ€»çº¿
â”‚   â””â”€â”€ performance-monitor.ts        # æ€§èƒ½ç›‘æ§
â”œâ”€â”€ @smartabp/lowcode-designer/src/    # å¯è§†åŒ–è®¾è®¡å™¨
â”‚   â”œâ”€â”€ designer.vue                  # ä¸»è®¾è®¡å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ canvas/                       # ç”»å¸ƒç»„ä»¶
â”‚   â”œâ”€â”€ palette/                      # ç»„ä»¶é¢æ¿
â”‚   â””â”€â”€ inspector/                      # å±æ€§æ£€æŸ¥å™¨
â”œâ”€â”€ @smartabp/lowcode-codegen/src/    # ä»£ç ç”Ÿæˆå¼•æ“
â”‚   â”œâ”€â”€ generator.ts                  # ä¸»ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ templates/                      # æ¨¡æ¿åº“
â”‚   â””â”€â”€ validators/                     # éªŒè¯å™¨
â””â”€â”€ @smartabp/lowcode-ui-vue/src/      # UIç»„ä»¶åº“
    â”œâ”€â”€ components/                     # é€šç”¨ç»„ä»¶
    â”œâ”€â”€ composables/                    # ç»„åˆå¼å‡½æ•°
    â””â”€â”€ utils/                          # å·¥å…·å‡½æ•°
```

### 9.3 æ¨¡æ¿ä¸å·¥å…·
```
templates/
â”œâ”€â”€ backend/                        # åç«¯ä»£ç æ¨¡æ¿
â”‚   â”œâ”€â”€ entity/                     # å®ä½“æ¨¡æ¿
â”‚   â”œâ”€â”€ app-service/                # åº”ç”¨æœåŠ¡æ¨¡æ¿
â”‚   â””â”€â”€ repository/                  # ä»“å‚¨æ¨¡æ¿
â”œâ”€â”€ frontend/                       # å‰ç«¯ä»£ç æ¨¡æ¿
â”‚   â”œâ”€â”€ vue-component/              # Vueç»„ä»¶æ¨¡æ¿
â”‚   â”œâ”€â”€ store/                      # Pinia Storeæ¨¡æ¿
â”‚   â””â”€â”€ router/                      # è·¯ç”±æ¨¡æ¿
â””â”€â”€ tools/                          # å¼€å‘å·¥å…·
    â”œâ”€â”€ incremental-generation/       # å¢é‡ç”Ÿæˆå·¥å…·
    â””â”€â”€ cli/                          # å‘½ä»¤è¡Œå·¥å…·
```

### 9.4 æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰
```
doc/architecture/adr/
â”œâ”€â”€ 0001-technology-stack-selection.md            # æŠ€æœ¯æ ˆé€‰æ‹©
â”œâ”€â”€ 0005-lowcode-engine-architecture.md           # ä½ä»£ç å¼•æ“æ¶æ„
â”œâ”€â”€ 0012-p1-backend-code-generation-engine.md     # åç«¯ä»£ç ç”Ÿæˆå¼•æ“
â”œâ”€â”€ 0015-visual-designer-architecture.md            # å¯è§†åŒ–è®¾è®¡å™¨æ¶æ„
â”œâ”€â”€ 0016-lowcode-engine-monorepo-refactoring.md   # Monorepoé‡æ„å†³ç­–
â””â”€â”€ 0017-performance-optimization-strategy.md     # æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
```

## 10. æŠ€æœ¯æ¼”è¿›è·¯çº¿å›¾

### 10.1 å·²å®ŒæˆåŠŸèƒ½ï¼ˆP0-P1é˜¶æ®µï¼Œé‡æ„å®Œæˆï¼‰
- âœ… **åŸºç¡€æ¶æ„**: .NET 9 + ABP v9.1.1 + Vue 3 + TypeScript + Vite
- âœ… **åç«¯ä½ä»£ç å¼•æ“**: åŸºäºRoslynçš„ä¼ä¸šçº§ä»£ç ç”Ÿæˆå¼•æ“ï¼Œä¸¥æ ¼ç±»å‹å®‰å…¨
- âœ… **å‰ç«¯ä½ä»£ç å¼•æ“**: å¾®å†…æ ¸+æ’ä»¶æ¶æ„ï¼ŒMonorepoç‹¬ç«‹å‘åŒ…ï¼Œæ‰€æœ‰P0ç¼ºé™·ä¿®å¤
- âœ… **å®ä½“è®¾è®¡å™¨**: æ‹–æ‹½å¼åç«¯å®ä½“ç±»å¼€å‘ç»„ä»¶ï¼Œä¼ä¸šçº§ç”¨æˆ·ä½“éªŒ
- âœ… **ä»£ç æ¨¡æ¿åº“**: å‰åç«¯ä»£ç æ¨¡æ¿ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿
- âœ… **ä¼ä¸šæ¶æ„æ¨¡å¼**: DDDã€CQRSã€å¾®æœåŠ¡æ”¯æŒï¼Œæ¶æ„æ¨¡å¼å¼ºåˆ¶æ‰§è¡Œ
- âœ… **è´¨é‡é—¨ç¦**: æµ‹è¯•è¦†ç›–ç‡â‰¥85%ï¼ŒSonarQube Açº§ï¼Œæ€§èƒ½åŸºå‡†è¾¾æˆ

### 10.2 è¿›è¡Œä¸­åŠŸèƒ½ï¼ˆP2é˜¶æ®µï¼‰
- ğŸš§ **å¯è§†åŒ–è®¾è®¡å™¨å¢å¼º**: Canvasã€Paletteã€Inspectorç»„ä»¶ä¼˜åŒ–
- ğŸš§ **æƒé™ç®¡ç†æ ‡æ†æ¨¡å—**: ç«¯åˆ°ç«¯ç”Ÿæˆçš„æƒé™ç®¡ç†ç³»ç»Ÿ
- ğŸš§ **æ™ºèƒ½å»ºè®®å¼•æ“**: åŸºäºè§„åˆ™çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥å»ºè®®ç³»ç»Ÿ
- ğŸš§ **æ€§èƒ½ä¼˜åŒ–**: ä»£ç ç”Ÿæˆæ€§èƒ½ä¼˜åŒ–ï¼Œå†…å­˜ä½¿ç”¨ä¼˜åŒ–

### 10.3 è§„åˆ’åŠŸèƒ½ï¼ˆV10+ç‰ˆæœ¬ï¼‰
- ğŸ”® **åŠ¨æ€æƒé™ä¸æ•°æ®æƒé™**: æ¡ä»¶æƒé™å¼•æ“ã€æ•°æ®æƒé™ç®¡ç†å™¨
- ğŸ”® **æ™ºèƒ½ä¼˜åŒ–ç³»ç»Ÿ**: è‡ªåŠ¨æ€§èƒ½åˆ†æä¸ä¼˜åŒ–å»ºè®®
- ğŸ”® **å¤šUIæ¡†æ¶æ”¯æŒ**: Reactã€Angularæ”¯æŒ
- ğŸ”® **æ’ä»¶ç”Ÿæ€å¸‚åœº**: å•†ä¸šåŒ–æ’ä»¶å¸‚åœº
- ğŸ”® **AIè¾…åŠ©å¼€å‘**: æ™ºèƒ½ä»£ç ç”Ÿæˆä¸ä¼˜åŒ–å»ºè®®

### 10.4 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | æ ¸å¿ƒç‰¹æ€§ | è´Ÿè´£äºº |
|------|----------|----------|--------|
| v1.0 | 2024-01-01 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€ABP+Vueæ¶æ„ | æ¶æ„å›¢é˜Ÿ |
| v1.5 | 2024-06-01 | æ–°å¢åç«¯ä½ä»£ç å¼•æ“æ¨¡å— | æ¶æ„å›¢é˜Ÿ |
| v2.0 | 2025-01-12 | å…¨é¢é‡æ„ï¼Œæ–°å¢å‰ç«¯ä½ä»£ç å¼•æ“Monorepoæ¶æ„ | CodeBuddy AI |
| v3.0 | 2025-09-19 | ä¼ä¸šçº§é‡æ„å®Œæˆï¼Œæ‰€æœ‰P0ç¼ºé™·ä¿®å¤ï¼Œè´¨é‡é—¨ç¦è¾¾æˆ | AI Assistant |

---

**æ–‡æ¡£è¯´æ˜**ï¼šæœ¬æ–‡æ¡£åŸºäºã€Šä½ä»£ç å¼•æ“é‡æ„å®ŒæˆæŠ¥å‘Šã€‹ï¼ˆ2025-09-19ï¼‰å’Œé¡¹ç›®æœ€æ–°ä»£ç ç»“æ„æ™ºèƒ½åˆ†æç”Ÿæˆï¼Œä¸é¡¹ç›®ç°çŠ¶é«˜åº¦ç›¸ç¬¦ã€‚ç³»ç»Ÿå·²é€šè¿‡ä¼ä¸šçº§ä»£ç è´¨é‡æ ‡å‡†ï¼Œæ‰€æœ‰P0çº§åˆ«è‡´å‘½ç¼ºé™·å·²ä¿®å¤ï¼Œè¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ã€‚

**ç»´æŠ¤åŸåˆ™**ï¼š
- ğŸ“‹ æ¶æ„å˜æ›´å¿…é¡»å…ˆæ›´æ–°ADRå†³ç­–è®°å½•
- ğŸ”„ é‡å¤§é‡æ„éœ€è¦æ›´æ–°æœ¬æ¶æ„è¯´æ˜ä¹¦
- âœ… æ–°åŠŸèƒ½å¼€å‘éœ€è¦æ›´æ–°ç›¸å…³ç« èŠ‚
- ğŸ¯ ä¿æŒæ–‡æ¡£ä¸ä»£ç å®ç°çš„ä¸€è‡´æ€§
- ğŸ”’ å®‰å…¨ç›¸å…³å˜æ›´å¿…é¡»æ›´æ–°å®‰å…¨ç« èŠ‚
- âš¡ æ€§èƒ½ä¼˜åŒ–å¿…é¡»æ›´æ–°æ€§èƒ½åŸºå‡†

**è”ç³»æ–¹å¼**ï¼šå¦‚å‘ç°æ–‡æ¡£ä¸å®ç°ä¸ä¸€è‡´ï¼Œè¯·æäº¤Issueæˆ–Pull Requestè¿›è¡Œä¿®è®¢ã€‚æ–‡æ¡£æœ€åæ›´æ–°äº2025å¹´9æœˆ19æ—¥ï¼ŒåŸºäºæœ€æ–°çš„é‡æ„æˆæœå’Œä¼ä¸šçº§æ ‡å‡†åˆ¶å®šã€‚


